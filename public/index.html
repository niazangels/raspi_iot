<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
	<title>Raspi IoT</title>

	<link rel="stylesheet" href="style.css">
	
	<script src="socket.io/socket.io.js"></script>
	<script type="text/javascript" src="jquery.js"></script>
	<!-- // <script type="text/javascript" src="app/script.js"></script> -->

  </head>
  <body>
	
	<!-- <iframe src ="http://192.168.0.140:8081" width="640" height="480">	 -->

	<!-- <input type="range" id= "inputSlider" min="0" max="255" value="50" step="1" oninput="showValue(this.value)" /> -->
	<!-- <br><br><span id="outputText">50</span> -->
	
	<script type="text/javascript">
		var socket = io.connect();

		function emitMove(key)
		{
			console.log ('Moving ' + key)
			socket.emit('move', { value: key });
		}

		function emitToggle(key)
		{
			console.log ('Toggling ' + key)
			socket.emit('action', { button: key });
		}
		
		socket.on('action', function (data) {
			status_a = data.a; status_b = data.b;
			status_c = data.c; status_d = data.d;

			console.log (status_a, status_b, status_c, status_d);
		});
		

		$(document).keydown(function(e) {
    
		    switch(e.keyCode){
		    
		    	/* Motion keys */
		    	/* { up: 38; down: 40; left: 37; right: 39}*/
		    	
		    	case 37 : emitMove('l'); break;
		    	case 38 : emitMove('u'); break;
		    	case 39 : emitMove('r'); break;
		    	case 40 : emitMove('d'); break;

		    	/* Action keys */
		    	/* { A: 65; S: 83; D: 68; F: 70 }*/
		    	/* Works both with CAPS on and off */

		    	case 65: emitToggle('a'); break;
		    	case 83: emitToggle('b'); break;
		    	case 68: emitToggle('c'); break;
		    	case 70: emitToggle('d'); break;

		    };
		});
	</script>
  </body>
</html>
